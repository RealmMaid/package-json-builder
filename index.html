<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; connect-src https://registry.npmjs.org">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Package.json Builder</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --bg-color: #f3f4f6; --text-color: #1f2937; --card-bg: #ffffff; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-color); color: var(--text-color); margin: 0; }
        .container { max-width: 1280px; margin-left: auto; margin-right: auto; padding: 2rem 1rem; }
        .grid { display: grid; }
        .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
        @media (min-width: 1024px) { .lg\\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
        .gap-8 { gap: 2rem; }
        .p-6 { padding: 1.5rem; }
        .mb-10 { margin-bottom: 2.5rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-8 { margin-top: 2rem; }
        .pt-6 { padding-top: 1.5rem; }
        .text-center { text-align: center; }
        .text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
        .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .text-xs { font-size: 0.75rem; line-height: 1rem; }
        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }
        .font-medium { font-weight: 500; }
        .font-mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
        .text-gray-900 { color: #111827; }
        .text-gray-700 { color: #374151; }
        .text-gray-600 { color: #4b5563; }
        .text-gray-500 { color: #6b7280; }
        .bg-white { background-color: var(--card-bg); }
        .rounded-xl { border-radius: 0.75rem; }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); }
        .border-t { border-top-width: 1px; }
        .border-b { border-bottom-width: 1px; }
        .border-gray-300 { border-color: #d1d5db; }
        .pb-3 { padding-bottom: 0.75rem; }
        .block { display: block; }
        .w-full { width: 100%; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .space-x-2 > :not([hidden]) ~ :not([hidden]) { margin-left: 0.5rem; }
        .space-y-4 > :not([hidden]) ~ :not([hidden]) { margin-top: 1rem; }
        .rounded-md { border-radius: 0.375rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        input, textarea { border: 1px solid #d1d5db; background-color: #f9fafb; padding: 0.5rem 0.75rem; border-radius: 0.375rem; width: 100%; box-sizing: border-box; }
        button { border: none; cursor: pointer; transition: background-color 0.2s; }
        .bg-indigo-600 { background-color: #4f46e5; }
        .hover\\:bg-indigo-700:hover { background-color: #4338ca; }
        .bg-teal-600 { background-color: #0d9488; }
        .hover\\:bg-teal-700:hover { background-color: #0f766e; }
        .bg-pink-500 { background-color: #ec4899; }
        .hover\\:bg-pink-600:hover { background-color: #db2777; }
        .bg-purple-500 { background-color: #a855f7; }
        .hover\\:bg-purple-600:hover { background-color: #9333ea; }
        .text-white { color: #ffffff; }
        .max-h-60 { max-height: 15rem; }
        .h-40 { height: 10rem; }
        .overflow-y-auto { overflow-y: auto; }
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #e5e7eb; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #9ca3af; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #6b7280; }
        .bg-gray-800 { background-color: #1f2937; }
        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .text-white { color: #ffffff; }
        .bg-blue-500 { background-color: #3b82f6; }
        .hover\\:bg-blue-600:hover { background-color: #2563eb; }
        .bg-green-500 { background-color: #22c55e; }
        .hover\\:bg-green-600:hover { background-color: #16a34a; }
        pre { white-space: pre-wrap; word-wrap: break-word; }
        .bg-gray-900 { background-color: #111827; }
        .text-green-300 { color: #86efac; }
        .p-4 { padding: 1rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .overflow-x-auto { overflow-x: auto; }
        .flex-grow { flex-grow: 1; }
        .hidden { display: none; }
        .break-all { word-break: break-all; }
        .animate-spin-slow { animation: spin 2s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        /* Toast */
        .fixed { position: fixed; }
        .top-5 { top: 1.25rem; }
        .right-5 { right: 1.25rem; }
        .opacity-0 { opacity: 0; }
        .translate-y-10 { transform: translateY(2.5rem); }
        .transition-all { transition-property: all; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 300ms; }
        /* Warning Styles */
        .warning-box { background-color: #fffbeb; border-left: 4px solid #fbbf24; padding: 1rem; margin-bottom: 1.5rem; border-radius: 0.5rem;}
        .warning-title { color: #d97706; font-weight: 700; }
        .warning-list { list-style-type: disc; padding-left: 1.25rem; margin-top: 0.5rem; color: #b45309; font-size: 0.875rem;}
        .warning-list code { background-color: #fef3c7; padding: 0.1rem 0.3rem; border-radius: 0.25rem; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
        .warning-list strong { color: #92400e; }
    </style>
</head>
<body class="antialiased text-gray-800">

    <div id="app" class="container">
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-gray-900">Package.json Builder</h1>
            <p class="text-lg text-gray-600 mt-2">Create your `package.json` files with ease.</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <!-- Configuration Section -->
                <h2 class="text-2xl font-semibold mb-4 border-b pb-3">Configuration</h2>
                
                <div class="space-y-4 mb-6">
                    <h3 class="text-lg font-medium text-gray-700">Project Details</h3>
                    <div><label for="projectName" class="block text-sm font-medium text-gray-600">Project Name</label><input type="text" id="projectName" value="my-awesome-project"></div>
                    <div><label for="projectVersion" class="block text-sm font-medium text-gray-600">Version</label><input type="text" id="projectVersion" value="1.0.0"></div>
                    <div><label for="projectDescription" class="block text-sm font-medium text-gray-600">Description</label><textarea id="projectDescription" rows="2">A fantastic new project.</textarea></div>
                </div>

                <div class="mb-6">
                    <h3 class="text-lg font-medium text-gray-700">Fetch Your Packages</h3>
                    <div class="flex space-x-2 mt-2"><input type="text" id="npmUsername" value="okaygift"><button id="fetchUserPackagesBtn" class="bg-indigo-600 text-white font-semibold px-4 py-2 rounded-md hover:bg-indigo-700">Fetch</button></div>
                    <div id="userPackagesContainer" class="mt-4 max-h-60 overflow-y-auto custom-scrollbar pr-2"></div>
                </div>
                
                <div class="mb-6">
                    <h3 class="text-lg font-medium text-gray-700">Search NPM</h3>
                    <div class="flex space-x-2 mt-2"><input type="text" id="npmSearch" placeholder="e.g., react, express..."><button id="searchBtn" class="bg-teal-600 text-white font-semibold px-4 py-2 rounded-md hover:bg-teal-700">Search</button></div>
                    <div id="searchResultsContainer" class="mt-4 max-h-60 overflow-y-auto custom-scrollbar pr-2"></div>
                </div>

                <div id="loadingIndicator" class="hidden my-4 flex items-center justify-center space-x-2 text-gray-500">
                    <svg class="animate-spin-slow h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    <span>Loading...</span>
                </div>
                
                <div class="mt-8 pt-6 border-t border-gray-300">
                    <h2 class="text-2xl font-semibold mb-4">Local Package Publisher</h2>
                    <p class="text-sm text-gray-500 mb-4">Select a local package folder to publish it to NPM.</p>
                    <div class="space-y-4">
                        <button id="selectFolderBtn" class="w-full bg-indigo-600 text-white font-semibold px-4 py-2 rounded-md hover:bg-indigo-700">Select Package Folder</button>
                        <p id="selectedFolder" class="text-center text-sm text-gray-600 font-mono break-all">No folder selected</p>
                        <button id="publishBtn" class="w-full bg-pink-500 text-white font-semibold px-4 py-2 rounded-md hover:bg-pink-600">Publish to NPM</button>
                    </div>
                    <div class="mt-4">
                        <h3 class="text-lg font-medium text-gray-700">Publish Output</h3>
                        <pre id="publishOutput" class="text-xs bg-gray-900 text-white p-4 mt-2 rounded-lg overflow-y-auto h-40 custom-scrollbar"></pre>
                    </div>
                </div>
            </div>

            <div class="bg-gray-800 p-6 rounded-xl shadow-lg flex flex-col">
                <!-- Compatibility Warnings -->
                <div id="compatibilityWarnings" class="hidden warning-box">
                    <h3 class="warning-title">Compatibility Warnings!</h3>
                    <ul id="warningList" class="warning-list"></ul>
                </div>
            
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-semibold text-white">Generated package.json</h2>
                    <div class="flex space-x-2">
                         <button id="copyBtn" class="bg-blue-500 text-white font-semibold px-4 py-2 rounded-md hover:bg-blue-600">Copy</button>
                         <button id="downloadBtn" class="bg-green-500 text-white font-semibold px-4 py-2 rounded-md hover:bg-green-600">Download</button>
                         <button id="screenshotBtn" class="bg-purple-500 text-white font-semibold px-4 py-2 rounded-md hover:bg-purple-600">Screenshot</button>
                    </div>
                </div>
                <pre id="output" class="text-sm bg-gray-900 text-green-300 p-4 rounded-lg overflow-x-auto custom-scrollbar flex-grow"></pre>
                <textarea id="clipboard-helper" style="position: absolute; left: -9999px;"></textarea>
            </div>
        </div>
        
        <div id="toast" class="fixed top-5 right-5 bg-green-500 text-white px-6 py-3 rounded-lg shadow-xl opacity-0 translate-y-10 transition-all">Copied to clipboard!</div>
    </div>
    
    <script src="./renderer.js"></script>
</body>
</html>
